<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>

<body>
    <div id="app" class="container mt-4">
        <form method="POST" action="" @submit.prevent="submitForm">
            <table class="table">
                <thead>
                    <tr>
                        <th class="text-center">name</th>
                        <th class="text-center">id</th>
                        <th class="text-center">x</th>
                        <th class="text-center">y</th>
                        <th class="text-center">z</th>
                    </tr>
                </thead>
                <tbody id="add_parameter">
                    <tr>
                        <td class="px-2">
                            <input type="text" class="form-control" v-model="navigation.name" required />
                        </td>
                        <td class="px-2">
                            <input type="text" class="form-control" v-model="navigation.id" required />
                        </td>
                        <td class="px-2">
                            <input type="text" class="form-control" v-model="navigation.x" required />
                        </td>
                        <td class="px-2">
                            <input type="text" class="form-control" v-model="navigation.y" required />
                        </td>
                        <td class="px-2">
                            <input type="text" class="form-control" v-model="navigation.z" required />
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="mb-3">
                <button type="submit" class="btn btn-primary me-2">Submit</button>
            </div>

            <div class="mb-3">
                <button type="button" class="btn btn-primary me-2" @click="get_all"> get all navigation</button>
            </div>
            <div class="mb-3">
                <button type="button" class="btn btn-danger" @click="clear_all_Navigation">clear all navigation</button>
            </div>

            <div class="mb-3">
                <button type="button" class="btn btn-danger" @click="clear_a_Navigation">clear the navigation</button>
            </div>
        </form>

    </div>
</body>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
    const { createApp, onMounted } = Vue;

    const App = {
        data() {
            return {
                navigation: {
                    name: '',
                    id: '',
                    x: '',
                    y: '',
                    z: ''
                }
            }
        },
        methods: {
            async submitForm() {
                const response = await fetch('/api/navigation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(this.navigation)
                });
                const json = await response.json();
                console.log(json);
                alert(JSON.stringify(json));
            },
            async get_all() {
                try {
                    const response = await fetch('/api/navigation/getAllNavigation');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.json();
                    console.log("Alldata", data);
                } catch (error) {
                    console.log("display all navigation error:", error);
                }
            },
            async clear_all_Navigation() {
                try {
                    const response = await fetch('/api/navigation/cleanAllNavigation', { method: 'POST' });
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const result = await response.json();
                    console.log(result.message);
                    alert("All navigation have been cleared.");
                } catch (error) {
                    console.error("Error cleaning navigation:", error);
                }
            },
            async clear_a_Navigation() {
                try {
                    const response = await fetch(`/api/navigation/cleanANavigation/${this.navigation.name}/${this.navigation.id}`, { method: 'POST' });
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const result = await response.json();
                    console.log(result);
                    alert("Specific navigation has been cleared.");
                } catch (error) {
                    console.error("Error clearing specific navigation:", error);
                }
            }
        },

        mounted() {
        }
    };

    createApp(App).mount('#app');
</script>

</html>